<h1 id="msg"></h1>
<div id="player"></div>

<script>
let lastData = "";

async function checkVideo() {
  try {
    const res = await fetch(
      "https://api.jsonbin.io/v3/b/698a228cd0ea881f40ada6fc/latest"
    );
    const json = await res.json();
    const data = json.record;

    const currentData = JSON.stringify(data);
    if (currentData === lastData) return;
    lastData = currentData;

    // Message
    document.getElementById("msg").innerText = data.message || "";

    // Vid√©o
    if (!data.video) return;

    const player = document.getElementById("player");
    player.innerHTML = "";

    const iframe = document.createElement("iframe");
    iframe.src = data.video + "?autoplay=1&mute=1&rel=0";
    iframe.width = "560";
    iframe.height = "315";
    iframe.allow = "autoplay; fullscreen";
    iframe.allowFullscreen = true;

    player.appendChild(iframe);

  } catch (e) {
    console.error("Erreur :", e);
  }
}

checkVideo();
setInterval(checkVideo, 2000);
</script>
